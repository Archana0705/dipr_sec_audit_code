<!DOCTYPE html>
<html class="no-js  page-18 app-INFO-PRDEPT103" lang="en">

<head>
  <script>
    if (!localStorage.getItem("userAdminName")) {
      window.location.replace("index.html");
    }
  </script>
  <meta http-equiv="x-ua-compatible" content="IE=edge" />
  <meta charset="utf-8">
  <title>Photo Upload</title>
  <link rel="stylesheet" type="text/css" href="assets/css/Core.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/Theme-Standard.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/font-apex.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/Coretheme.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/cs-theme.css">
  <link rel="stylesheet" type="text/css" href="assets/css/custom.min.css">
  <link rel="apple-touch-icon" href="assets/img/app-icon-192.png">
  <link rel="icon" href="assets/img/app-icon-32.png">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/toastr/toastr.min.css" rel="stylesheet">
  <link rel="stylesheet"
    href="https://static.oracle.com/cdn/apex/24.1.7/libraries/oraclejet/16.0.10/css/libs/oj/16.0.10/redwood/oj-redwood-notag-min.css?v=24.1.7"
    type="text/css" />
  <link rel="stylesheet" href="https://static.oracle.com/cdn/apex/24.1.7/app_ui/css/Core.min.css?v=24.1.7"
    type="text/css" />
  <link rel="stylesheet" href="https://static.oracle.com/cdn/apex/24.1.7/app_ui/css/Theme-Standard.min.css?v=24.1.7"
    type="text/css" />

  <link rel="stylesheet"
    href="https://static.oracle.com/cdn/apex/24.1.7/libraries/font-apex/2.3/css/font-apex.min.css?v=24.1.7"
    type="text/css" />
  <link rel="stylesheet" href="https://static.oracle.com/cdn/apex/24.1.7/themes/theme_42/23.1/css/Core.min.css?v=24.1.7"
    type="text/css" />
  <link rel="stylesheet" type="text/css" href="assets/css/menu.css">
  <link href="assets/vendor/datatable/css/dataTables.css" rel="stylesheet">

  <style>
    .dataTables_wrapper .dataTables_paginate .paginate_button {
      display: inline-block;
      padding: 0.375rem 0.75rem;
      margin-left: 0.25rem;
      margin-right: 0.25rem;
      border: 1px solid #dee2e6;
      border-radius: 0.25rem;
      background-color: #fff;
      color: #0d6efd;
      text-decoration: none;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button.current {
      background-color: #0d6efd;
      color: #fff;
      border-color: #0d6efd;
    }
    div#admin-photo-upload-table_paginate {
      display: flex;
      justify-content: end;
      cursor: pointer;
      gap: 15px;
    }

    div#admin-photo-upload-table_paginate span {
      display: flex;
      gap: 10px;
    }

    div#admin-photo-upload-table_paginate a.paginate_button {
      color: #333;
      text-decoration: none;
    }

    div#video-upload-table_paginate {
      display: flex;
      justify-content: end;
      cursor: pointer;
      gap: 15px;
    }

    div#video-upload-table_paginate span {
      display: flex;
      gap: 10px;
    }

    div#video-upload-table_paginate a.paginate_button {
      color: #333;
      text-decoration: none;
    }

    .showlink {
      display: none !important;
      position: absolute;
      background: white;
      border: 1px solid #ccc;
      z-index: 999;
      min-width: 150px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .showlink.force-show {
      display: block !important;
    }

    /* Force dropdown to show */
    .t-NavigationBar-menu {
      display: none !important;
      position: absolute !important;
      background: white !important;
      border: 1px solid #ccc !important;
      z-index: 9999 !important;
      min-width: 150px !important;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
    }

    /* Show when force-show is applied */
    .t-NavigationBar-menu.force-show {
      display: block !important;
    }

    .t-NavigationBar-menu {
      display: none;
    }

    .t-NavigationBar-menu.show {
      display: block;
    }

    .t-NavigationBar-menu {
      z-index: 9999;
    }

    .t-NavigationBar-menu {
      display: none;
      position: absolute;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      z-index: 100;
      padding: 5px;
    }
  </style>
  <style type="text/css">
    #engSecContent tr td {
      text-align: left !important;
    }

    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      z-index: 9999;
      overflow: hidden;
      background: #12121261;
      /*width: 57%;*/
      border-radius: 13px 35px;
    }

    #preloader:before {
      content: "";
      position: fixed;
      top: calc(50% - 30px);
      left: calc(53% - 30px);
      border: 6px solid #f92020b8;
      border-top-color: #e2eefd;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      -webkit-animation: animate-preloader 1s linear infinite;
      animation: animate-preloader 1s linear infinite;
      z-index: 9999;
    }

    @-webkit-keyframes animate-preloader {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    @keyframes animate-preloader {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    #engSecContent tr td {
      text-align: left !important;
    }

    #TASecCon tr td {
      text-align: left !important;
    }

    .t-Footer {
      background-color: #3b3b79;
      color: white;
    }

    .t-Header-nav1 {
      text-align: center;
      background-color: #3b3b79;
      color: white;
    }

    .t-Header-navBar {
      --ut-field-padding-y: 0rem;
      align-items: center;
      display: grid;
      grid-area: navbar;
      grid-template-areas: "navbar-start navbar-center navbar-end";
      grid-template-columns: 1fr auto auto;
      justify-content: end;
      align-content: center;
      background: #3b3b79;
      color: white;
    }

    .apex-item-select,
    .datetimepicker_newMonth,
    .u-TF-item--select,
    select.group_selectlist {
      background-position: 100%;
      background-repeat: no-repeat;
      padding-inline-end: var(--a-field-select-arrow-padding, 2rem);
      color: white;
      background: #3b3b79;
      width: 105px;
    }


    .fa {
      padding: 10px;
      font-size: 15px;
      width: 40px;
      text-align: center;
      text-decoration: none;
      margin: 5px 2px;
      border-radius: 30%;
    }

    .fa:hover {
      opacity: 0.7;
    }

    .fa-facebook {
      background: #3B5998;
      color: white;
    }

    .fa-twitter {
      background: #55ACEE;
      color: white;
    }

    .fa-google {
      background: #dd4b39;
      color: white;
    }

    .fa-linkedin {
      background: #007bb5;
      color: white;
    }

    .fa-youtube {
      background: #bb0000;
      color: white;
    }

    .fa-instagram {
      background: white;
      color: black;
    }

    h4,
    h2 {
      font-weight: var(--a-base-font-weight-semibold, 500);
      line-height: 1.5;
      color: #3b3b79;

    }

    .t-Breadcrumb-label {
      color: #3c3b79;
      display: inherit;
      font-size: inherit;
      font-weight: inherit;
      line-height: inherit;
      margin: inherit;
    }

    .t-Footer-topButton {
      --a-icon-size: 1rem;
      -webkit-margin-start: auto;
      -webkit-margin-end: auto;
      align-items: center;
      background-color: var(--ut-footer-top-background-color, var(--a-button-background-color));
      border-color: var(--ut-footer-top-border-color, var(--a-button-border-color));
      border-radius: var(--ut-footer-top-border-radius, 100%);
      border-style: solid;
      border-width: var(--ut-footer-top-border-width, var(--a-button-border-width, 1px));
      box-shadow: var(--ut-footer-top-box-shadow, var(--a-button-box-shadow), none);
      color: var(--ut-footer-top-text-color, var(--a-button-text-color));
      display: flex;
      height: var(--ut-footer-top-size, 2.5rem);
      justify-content: center;
      margin-inline-end: auto;
      margin-inline-start: auto;
      /* opacity: var(--ut-footer-top-opacity,.); */
      padding: calc(var(--ut-footer-top-padding, .75rem) - var(--ut-footer-top-border-width, var(--a-button-border-width, 1px)));
      transition: .1s ease;
      width: var(--ut-footer-top-size, 2.5rem);
      z-index: 99;
      position: fixed;
      bottom: 3%;
      right: 3%;
      box-shadow: 1px 1px 5px black;
    }

    /* Sticky header styles */
    .nobgcolor {
      background-color: #fff;
      /* Set your desired background color */
      position: sticky;
      top: 0;
      z-index: 100;
    }

    /* Header image styles */
    .header-images {
      max-height: 110px;
      display: inline-block;
      vertical-align: middle;
    }

    /* Center text styles */
    .center-text {
      display: block;
      margin: auto;
      font-weight: 900;
      font-size: 1.5rem;
    }

    /* Container for centering */
    .widthFixed {
      max-width: 100%;
      /* Adjust as needed */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .center-text center {
      color: #c52c27;

    }

    .txtBlue {
      color: #3c3b79;
      font-weight: 900;
      font-size: 1.5rem;
    }

    #first_image {
      margin-left: 8%;
    }

    #last_image {
      margin-right: 8%;
    }

    .container {
      width: 80%;
      text-align: justify;
    }

    @media only screen and (max-width:600px) {
      .header-images {
        max-height: 50px;
        display: inline-block;
        vertical-align: middle;
      }

      .container {
        width: 95%;
      }

      #first_image {
        margin-left: 2%;
      }

      #last_image {
        margin-right: 2%;
      }

      .center-text {
        display: block;
        text-align: center;
        margin: auto;
        font-weight: 400;
        font-size: .8rem;

      }

      .txtBlue {
        color: #3c3b79;
        font-weight: 800;
        font-size: .9rem;
      }

    }

    /* .first_image{
                    position:
                } */
  </style>

  <link rel="stylesheet" href="r/dipr/103/files/theme/42/v87/10689188252099023.css" type="text/css" />



  <link rel="apple-touch-icon" href="r/dipr/103/files/static/v397/icons/app-icon-192.png" />
  <link rel="icon" href="r/dipr/103/files/static/v397/icons/app-icon-32.png" />

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="-1" />
  <meta http-equiv="Cache-Control" content="no-cache" />
  <meta name="theme-color" content="&#x23;000000" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="Info&#x26;PRDept" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />


  <!-- <div id="preloader"></div> -->
</head>

<body
  class="t-PageBody t-PageBody--hideLeft t-PageBody--hideActions no-anim t-PageTemplate--standard   apex-top-nav apex-icons-fontapex apex-theme-vita-copy-2-copy-1"
  id="t_PageBody">
  <a href="#main" id="t_Body_skipToContent">Skip to Main Content</a>

  <form>
    <header class="t-Header" id="t_Header" role="banner">

      <div class="t-Header-navBar">

        <div class="t-Header-navBar--start">

          <div class="t-Header-navBar--end">
            <div
              class="t-Form-fieldContainer rel-col t-Form-fieldContainer--large t-Form-fieldContainer--normalDisplay apex-item-wrapper apex-item-wrapper--has-initial-value apex-item-wrapper--select-list"
              id="P0_LANGUAGE_CONTAINER">
              <div class="t-Form-labelContainer col col-null">
                <label for="P0_LANGUAGE" id="P0_LANGUAGE_LABEL" class="t-Form-label"></label>
              </div>
              <div class="t-Form-inputContainer col col-null">
                <div class="t-Form-itemWrapper"><select id="P0_LANGUAGE" name="P0_LANGUAGE"
                    class="selectlist apex-item-select" data-native-menu="false" size="1">
                    <option value="en">English</option>
                    <option value="ta">Tamil</option>
                  </select></div><span id="P0_LANGUAGE_error_placeholder" class="a-Form-error"
                  data-template-id="32751098700172723_ET"></span>
              </div>
            </div>
            <div class="t-Header-navBar--center">
              <ul class="t-NavigationBar " id="32861498506172843">
                <li class="t-NavigationBar-item a-pwaInstall">
                  <a class="t-Button t-Button--icon t-Button--header t-Button--navBar" href="#action$a-pwa-install"
                    title="" target="">
                    <span class="t-Icon fa&#x20;fa-cloud-download" aria-hidden="true"></span><span
                      class="t-Button-label">Install App</span><span class="t-Button-badge"></span>
                  </a>
                </li>
                <li class="t-NavigationBar-item has-username shownav">
                  <button class="t-Button t-Button--icon t-Button--header t-Button--navBar" type="button">
                    <span class="t-Icon fa fa-user" aria-hidden="true"></span>
                    <span class="t-Button-label admin-name-change">Username</span>
                    <span class="t-Button-badge"></span>
                    <span class="a-Icon icon-down-arrow" aria-hidden="true"></span>
                  </button>
                  <!-- <div class="t-NavigationBar-menu showlink">
							<ul>
							  <li>
								<a href="#">Sign Out</a>
							  </li>
							</ul>
						  </div> -->
                </li>
              </ul>
            </div>

          </div>

          <a href="https://www.facebook.com/TNDIPR" class="fa fa-facebook" target='_blank'></a>
          <a href="https://twitter.com/TNDIPRNEWS" class="fa fa-twitter " target='_blank'></a>
          <!--<a href="https://www.instagram.com/tndipr" class="fa fa-instagram"></a> -->
          <a href="https://www.instagram.com/tndipr"><img src="r/dipr/103/files/static/v358/instagram.jpeg"
              style="height:35px;" class="fa fa-twitter" target='_blank'>
            <a href="https://www.youtube.com/c/tndipr21" class="fa fa-youtube" target='_blank'></a>


        </div>

      </div>

      <!-- <div class=" nobgcolor ">
<img id="first_image" style=" height: 100%;" src = 'r/dipr/103/files/static/v397/left-png.png' > <span class="alignCenter"><center> Information and Public Relations Department </br> ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡Æø ‚Äì ‡ÆÆ‡Æï‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æ±‡Øà </center></span>
    <img id="last_image" style=" height: 100%;" src = "r/dipr/103/files/static/v397/right-png.png" > 

   </div> -->
      <div class="nobgcolor">
        <div class="widthFixed">
          <!-- <img id="first_image" class="header-images" src="r/dipr/103/files/static/v397/left-png.png"> -->
          <div class="center-text">
            <center>Information and Public Relations Department
              <br> <span class="txtBlue">‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡Æø ‚Äì ‡ÆÆ‡Æï‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æ±‡Øà</span>
            </center>
          </div>
          <!-- <img id="last_image" class="header-images" src="r/dipr/103/files/static/v397/right-png.png"> -->
        </div>
      </div>

      <div class="t-Header-nav">
        <div class="t-Header-nav-list js-tabLike js-tabLike" id="t_MenuNav">
          <ul>
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                class="a-MenuBar-label" href="index.html" title="" target="">Home</a>
            </li>
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                class="a-MenuBar-label" href="about_page.html" title="" target="">About
                Us</a></li>
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                class="a-MenuBar-label" href="gallery1.html" title="" target="">Photo
                &#x2F; Video</a></li>
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                class="a-MenuBar-label" href="press-release1.html" title="" target="">Press Release &#x2F; Press
                Note</a></li>
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                class="a-MenuBar-label" href="government-orders.html" title="" target="">Government Orders</a></li>
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                class="a-MenuBar-label" href="sections.html" title="" target="">Sections</a></li>
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                class="a-MenuBar-label" href="download-forms.html" title="" target="">Download Forms</a></li>
            <li class="a-MenuBar-item admin-menu-show" data-id="" data-disabled="" data-hide="" data-shortcut=""
              data-icon=""><a class="a-MenuBar-label" href="admin-google-sheets.html" title="" target="">Google
                Sheets - Report</a>
            </li>
            <li class="a-MenuBar-item admin-menu-show a-Menu--current" data-current="true" data-id="" data-disabled=""
              data-hide="" data-shortcut="" data-icon=""><a class="a-MenuBar-label" href="" title=""
                target="">Administration</a>
              <ul style="display: none">
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-photo-upload.html" title="" target="">Photo&#x2F;Video Upload</a>
                </li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-press-release.html" title="" target="">Upload Press Release</a>
                </li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-section-content.html" title="" target="">Sections Content</a>
                </li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-goverment-orders.html" title="" target="">Upload Government
                    Orders</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-sections-data-report.html" title="" target="">Sections Data
                    Report</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-forms-report.html" title="" target="">Forms Report</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-memorial-video-report.html" title="" target="">memorial_video_report</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-monuments.html" title="" target="">Monuments</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a href="admin-arangams.html"
                    title="" target="">Arangams</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-commemoration-pillars.html" title="" target="">Commemoration
                    Pillars</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-commemoration-arch.html" title="" target="">Commemoration
                    Arch</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-department-pictures.html" title="" target="">Department
                    Pictures</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-department-details.html" title="" target="">Department
                    Details</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-conclusion-photos.html" title="" target="">Conclusion_Photos</a>
                </li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-google-sheets.html" title="" target="">Google Sheets</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-press-notes.html" title="" target="">Upload Press Note</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a href="admin-add-user.html"
                    title="" target="">Add
                    User</a></li>
                <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                    href="admin-navigation-list-entry.html" title="" target="">Navigation Menu
                    Report</a></li>
              </ul>
            </li>
          </ul>
          </ul>
        </div>
      </div>

    </header>

    <div class="t-Body">

      <div class="t-Body-main">
        <div class="t-Body-title" id="t_Body_title">
          <nav id="R35581281318104459" role="navigation" aria-label="Breadcrumb"
            class="t-BreadcrumbRegion t-BreadcrumbRegion--showBreadcrumb t-BreadcrumbRegion--useBreadcrumbTitle">
            <div class="t-BreadcrumbRegion-top">
              <div class="t-BreadcrumbRegion-buttons t-BreadcrumbRegion-buttons--start"></div>
              <div class="t-BreadcrumbRegion-body">
                <div class="t-BreadcrumbRegion-breadcrumb">
                  <ul class="t-Breadcrumb ">
                    <li class="t-Breadcrumb-item is-active" aria-current="page">
                      <h1 class="t-Breadcrumb-label">Photo Upload</h1>
                    </li>
                  </ul>
                </div>
                <div class="t-BreadcrumbRegion-title">
                  <h1 id="R35581281318104459_heading" class="t-BreadcrumbRegion-titleText" data-apex-heading>Breadcrumb
                  </h1>
                </div>
              </div>
              <div class="t-BreadcrumbRegion-buttons t-BreadcrumbRegion-buttons--end"></div>
            </div>
            <div class="t-BreadcrumbRegion-bottom"></div>
          </nav>
        </div>
        <div class="t-Body-content" id="t_Body_content">
          <main id="main" class="t-Body-mainContent">
            <span id="APEX_SUCCESS_MESSAGE" data-template-id="33086037481442559_S"
              class="apex-page-success u-hidden"></span><span id="APEX_ERROR_MESSAGE"
              data-template-id="33086037481442559_E" class="apex-page-error u-hidden"></span>
            <div class="t-Body-fullContent"></div>
            <!--  -->

            <div class="t-Body-contentInner">
              <div class="container">
                <div class="row ">
                  <div class="col col-12 apex-col-auto col-start col-end">
                    <div id="R22879691196163085" class=""></div>
                  </div>
                </div>

                <div class="row ">
                  <div class="col col-12 apex-col-auto col-start col-end">
                    <div class="t-TabsRegion js-useLocalStorage t-TabsRegion-mod--simple apex-tabs-region"
                      id="R37494869251508934">

                      <!-- =================== TABS =================== -->
                      <ul class="nav nav-tabs" id="uploadTabs">
                        <li class="nav-item">
                          <a class="nav-link active" id="photo-tab" data-bs-toggle="tab" href="#photoPane">Photo
                            Upload</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" id="video-tab" data-bs-toggle="tab" href="#videoPane">Video Upload</a>
                        </li>
                      </ul>

                      <div class="tab-content mt-3">
                        <!-- =================== PHOTO TAB =================== -->
                        <div class="tab-pane fade show active" id="photoPane">
                          <button id="openPhotoModalBtn" class="btn btn-success mb-3">Create Photo Attachment</button>
                          <table id="photoTable" class="table table-bordered table-striped">
                            <thead>
                              <tr>
                                <th>Edit</th>
                                <th>File Name</th>
                                <th>Language</th>
                                <th>Created By</th>
                                <th>Created On</th>
                              </tr>
                            </thead>
                            <tbody></tbody>
                          </table>
                        </div>

                        <!-- =================== VIDEO TAB =================== -->
                        <div class="tab-pane fade" id="videoPane">
                          <button id="openVideoModalBtn" class="btn btn-success mb-3">Create Video Attachment</button>
                          <table id="videoTable" class="table table-bordered table-striped">
                            <thead>
                              <tr>
                                <th>Edit</th>
                                <th>Name</th>
                                <th>Description</th>
                                <th>URL</th>
                                <th>Language</th>
                                <th>Created By</th>
                                <th>Created On</th>
                              </tr>
                            </thead>
                            <tbody></tbody>
                          </table>
                        </div>
                      </div>

                      <!-- =================== PHOTO MODAL =================== -->
                      <div class="modal fade" id="photoAttachmentModal" tabindex="-1" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                          <div class="modal-content">
                            <div class="modal-header bg-primary text-white">
                              <h5 class="modal-title">Add New Photo Attachment</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>

                            <form id="photoAttachmentForm" enctype="multipart/form-data" action="javascript:void(0);">
                              <div class="modal-body">
                                <div class="row g-3">
                                  <div class="col-md-6">
                                    <label class="form-label">Language</label>
                                    <select id="photoLanguage" class="form-select" required>
                                      <option value="">Select</option>
                                      <option value="en">English</option>
                                      <option value="ta">Tamil</option>
                                    </select>
                                  </div>
                                  <div class="col-md-6">
                                    <label class="form-label">Date</label>
                                    <input type="date" id="photoDate" class="form-control" required>
                                  </div>
                                  <div class="col-md-12">
                                    <label class="form-label">Choose File</label>
                                    <input type="file" id="photoFile" class="form-control" accept=".jpg,.jpeg,.png,.pdf"
                                      required>
                                    <input type="text" id="photoFileName" class="form-control mt-2" readonly
                                      placeholder="No file selected" style="display:none;">
                                  </div>
                                </div>
                              </div>

                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" id="photoDeleteBtn" class="btn btn-danger d-none">Delete</button>
                                <button type="button" id="photoSubmitBtn" class="btn btn-primary">Submit</button>
                              </div>
                            </form>
                          </div>
                        </div>
                      </div>

                      <!-- =================== VIDEO MODAL =================== -->
                      <div class="modal fade" id="videoAttachmentModal" tabindex="-1" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                          <div class="modal-content">
                            <div class="modal-header bg-primary text-white">
                              <h5 class="modal-title">Add New Video Attachment</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>

                            <form id="videoAttachmentForm" enctype="multipart/form-data" action="javascript:void(0);">
                              <div class="modal-body">
                                <div class="row g-3">
                                  <div class="col-md-6">
                                    <label class="form-label">Language</label>
                                    <select id="videoLanguage" class="form-select" required>
                                      <option value="">Select</option>
                                      <option value="en">English</option>
                                      <option value="ta">Tamil</option>
                                    </select>
                                  </div>
                                  <div class="col-md-6">
                                    <label class="form-label">Date</label>
                                    <input type="date" id="videoDate" class="form-control" required>
                                  </div>
                                  
                                  <!-- Name -->
                                  <div class="col-md-6">
                                    <label class="form-label">Video Name</label>
                                    <input type="text" id="videoName" class="form-control" placeholder="Enter video name" required>
                                  </div>

                                  <!-- YouTube URL -->
                                  <div class="col-md-6">
                                    <label class="form-label">YouTube URL</label>
                                    <input type="url" id="videoUrl" class="form-control" placeholder="https://www.youtube.com/watch?v=..." required>
                                    <div id="urlError" class="text-danger mt-1 d-none">Please enter a valid YouTube URL.</div>
                                  </div>

                                  <!-- Description -->
                                  <div class="col-md-12">
                                    <label class="form-label">Description</label>
                                    <textarea id="videoDescription" class="form-control" placeholder="Enter description" required></textarea>
                                  </div>
                                </div>
                              </div>

                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" id="videoDeleteBtn" class="btn btn-danger d-none">Delete</button>
                                <button type="button" id="videoSubmitBtn" class="btn btn-primary">Submit</button>
                              </div>
                            </form>
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
            </div>

          </main>
          <footer class="t-Footer" id="t_Footer" role="contentinfo">
            <div class="t-Footer-body">
              <div class="t-Footer-content">
                <div class="container">
                  <div class="row ">
                    <div class="col col-12 apex-col-auto col-start col-end">
                      <div id="R11684238522218402" class="">Information & Public Relations
                        Department, Secretariat, Chennai 600 009</div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="t-Footer-apex">

                <div class="t-Footer-version">

                </div>
                <div class="t-Footer-customize">

                </div>

              </div>
            </div>
            <div class="t-Footer-top">
              <a href="#top" class="t-Footer-topButton" id="t_Footer_topButton" title="Start of page"
                aria-label="Start of page"><span class="a-Icon icon-up-chevron" aria-hidden="true"></span></a>
            </div>
          </footer>
        </div>
      </div>
    </div>
    <div class="t-Body-inlineDialogs" id="t_Body_inlineDialogs"></div>
    <input type="hidden" id="pPageFormRegionChecksums" value="&#x5B;&#x5D;">
    <input type="hidden" id="pPageItemsRowVersion" value="" />
    <input type="hidden" id="pPageItemsProtected"
      value="&#x2F;J4ieeBRwL3lIIKqd0-cL5kzutqFyrLI3idLlAiE2MmdvDJ3gUXpKHuJRINK-moovG6G6oeKYG8JP--3FNT8zHw" />
  </form>

  <script src="assets/js/jquery-3.6.0.min.js"></script>
  <script type="text/javascript" src="assets/js/desktop_all.min.js"></script>
  <script src="assets/vendor/datatable/jquery.dataTables.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/global.js"></script>
  <script src="assets/js/fileValidator.js"></script>
  <script src="assets/js/basepath.js"></script>
  <script src="assets/js/apiConfig.js"></script>
  <script src="assets/js/encrypt_decrypt.js"></script>
  <script src="assets/js/crypto-js.min.js"></script>
  <script src="assets/js/toastUtil.js"></script>
  <script type="text/javascript">
    apex.session.initTimeouts(300, { "idle_time_ms": 3595000, "life_time_ms": 28755000, "max_idle_time_ms": 3600000 }, '\u002Fords\u002Fr\u002Fdipr\u002Finfo-prdept103\u002Fhome', '\u002Fords\u002Fr\u002Fdipr\u002Finfo-prdept103\u002Fhome');
    apex.jQuery(function () {
      apex.page.init(this, function () {
        try {
          (function () { apex.widget.selectList("#P0_LANGUAGE", { "ajaxIdentifier": "SVRFTSBUWVBFfjUxMjB-MzgxODM5MDAxMjAxMjk3NDc\u002FqNARaPF5gDXj9vUg6HNb_-Nu7WF-ASygDaMOVVhb1z-Xe7rng6WDpJFQfSGfA0_eq-mm9wm0mx3CjUGl7mhFpA" }); })();
          (function () {
            var e = apex.jQuery("#t_MenuNav", apex.gPageContext$);
            if (e.hasClass("js-addActions")) {
              apex.actions.addFromMarkup(e);
            }
            e.menu({
              behaveLikeTabs: e.hasClass("js-tabLike"),
              menubarShowSubMenuIcon: e.hasClass("js-showSubMenuIcons") || null,
              menubar: true,
              menubarOverflow: true,
              callout: e.hasClass("js-menu-callout")
            });
          })();
          (function () { apex.jQuery('#R34839964403869597_ir').interactiveReport({ "regionId": "R34839964403869597", "helpLink": "wwv_flow_utilities.show_ir_help?p_app_id=103\u0026p_worksheet_id=34839996188869597\u0026p_lang=en", "lazyLoading": false, "ajaxIdentifier": "UkVHSU9OIFRZUEV-fjM0ODM5OTY0NDAzODY5NTk3\u002F1h3h-l5ziaqoxBpLrM_KI3v-d4OwVtIuxt1TSsxJyOGdiCAdZBq79n5zvLnQCHpEsHHZ-J2ehCjC2LIAqbL57A" }); })();
          (function () {
            var e = apex.jQuery("#t_MenuNav", apex.gPageContext$);
            if (e.hasClass("js-addActions")) {
              apex.actions.addFromMarkup(e);
            }
            e.menu({
              behaveLikeTabs: e.hasClass("js-tabLike"),
              menubarShowSubMenuIcon: e.hasClass("js-showSubMenuIcons") || null,
              menubar: true,
              menubarOverflow: true,
              callout: e.hasClass("js-menu-callout")
            });
          })();
        } catch (e) { apex.debug.error(e) };
        apex.item.waitForDelayLoadItems().done(function () {
          try {
            (function () {
              apex.da.initDaEventList();
              apex.da.init();
            })();
            apex.theme42.initializePage.noSideCol();

            apex.page.warnOnUnsavedChanges();
          } finally {
            apex.event.trigger(apex.gPageContext$, 'apexreadyend');
          };
        });
      });
    }); apex.pwa.publicKey = ''
    apex.pwa.pushSubscriptions = [
    ]
    apex.pwa.init({ serviceWorkerPath: '\u002Fords\u002Fr\u002Fdipr\u002Finfo-prdept103\u002Fsw.js?v=24.1.7-44329441868468\u0026lang=en' });
  </script>

  <script>


    $(document).ready(function () {
      $("#adminLoginBtn").on("click", function () {
        window.location.href = "admin-login.html";
      });

      $('.shownav').on('click', function (e) {

        e.stopPropagation(); // Prevent closing when clicking inside
        $('.showlink').not($(this).find('.showlink')).removeClass('force-show'); // Close other dropdowns
        $(this).find('.showlink').toggleClass('force-show');
      });

      // Click outside to hide dropdown
      $(document).on('click', function () {
        $('.showlink').removeClass('force-show');
      });
    });


  </script>
  <script>
    // ‚úÖ Make these GLOBAL ‚Äî outside $(document).ready()
    // function showSuccessToast(message) {
    //   const toastElement = document.getElementById('successToast');
    //   const toastBody = document.getElementById('successMessage');
    //   if (!toastElement || !toastBody) {
    //     console.warn('Toast elements not found.');
    //     alert(message); // fallback
    //     return;
    //   }

    //   toastBody.textContent = message;

    //   const toast = new bootstrap.Toast(toastElement, {
    //     autohide: true,
    //     delay: 3000
    //   });
    //   toast.show();
    // }

    // function showErrorToast(message) {
    //   const toastElement = document.getElementById('errorToast');
    //   const toastBody = document.getElementById('errorMessage');
    //   if (!toastElement || !toastBody) {
    //     console.warn('Toast elements not found.');
    //     alert(message); // fallback
    //     return;
    //   }

    //   toastBody.textContent = message;

    //   const toast = new bootstrap.Toast(toastElement, {
    //     autohide: true,
    //     delay: 3000
    //   });
    //   toast.show();
    // }

    $(document).ready(function () {
      const secretKey = decryptKey();
      const encryptedData = localStorage.getItem("role");
      let role = null;

      if (encryptedData) {
        try {
          const decryptedData = JSON.parse(
            CryptoJS.AES.decrypt(encryptedData, secretKey).toString(CryptoJS.enc.Utf8)
          );
          role = decryptedData || null;
        } catch (err) {
          console.error("Error decrypting user data:", err);
        }
      }

      var userAdminName = localStorage.getItem("userAdminName");
      if (role) {
        $('.admin-name-change').text(role);
        $('.js-tabLike .admin-menu-show').css('display', 'block');

        var interval = setInterval(function () {
          if ($('#t_MenuNav_7').length) $('#t_MenuNav_7').css('display', 'flex');
          if ($('#t_MenuNav_8').length) $('#t_MenuNav_8').css('display', 'flex');
          if ($('#t_MenuNav_7').length && $('#t_MenuNav_8').length) clearInterval(interval);
        }, 100);
      }

      var appendSignout = `
    <div class="t-NavigationBar-menu showlink">
      <ul><li><a href="../index.html" class="signOutBtn">Sign Out</a></li></ul>
    </div>`;
      $('.t-NavigationBar-item.has-username.shownav').append(appendSignout);

      $(".signOutBtn").on("click", function (event) {
        event.preventDefault();

        const payload = {
          action: "function_call",
          function_name: "user_logout",
          params: { user_id: userId }
        };

        $.ajax({
          url: `${BASE_API_URL}/commonfunction`,
          type: "POST",
          headers: {
            "X-App-Key": "dipr",
            "X-App-Name": "dipr"
          },
          data: { data: encryptData(payload) },
          dataType: "json",
          success: function (response) {
            if (response.success) {
              localStorage.removeItem("role");
              localStorage.removeItem("userAdminName");
              showSuccessToast(response.message || "Logged out successfully!");
              window.location.href = "index.html";
            } else {
              showErrorToast(response.message || "Logout failed");
            }
          },
          error: function (xhr, status, error) {
            console.error("Logout request failed:", error);
            showErrorToast("Logout request failed. Please try again.");
          }
        });
      });
    });


  </script>




  <!-- <script>
    $(document).ready(function () {
      $('#preloader').hide();
      let langSwitch = 'en';

      // üîπ Preloader handling for AJAX
      $(document).on({
        ajaxStart: function () {
          $('#preloader').show();
          $("body").addClass("user_loading");
        },
        ajaxStop: function () {
          $('#preloader').hide();
          $("body").removeClass("user_loading");
        }
      });

      // üîπ User info decryption
      let userId = null;
      const secretKey = decryptKey();
      const encryptedData = localStorage.getItem("userAdminName");

      if (encryptedData) {
        try {
          const decryptedData = JSON.parse(
            CryptoJS.AES.decrypt(encryptedData, secretKey).toString(CryptoJS.enc.Utf8)
          );
          userId = decryptedData?.user_id || null;
        } catch (err) {
          console.error("Error decrypting user data:", err);
        }
      }




      // Open modal handlers ‚Äî reset form safely when opened
      function resetAttachmentModal() {
        const form = $("#createAttachmentForm")[0];
        if (form) form.reset();

        // Reset all visual + logical states
        $("#fileNameField").val("").hide();
        $("#fileUpload").val("").show();
        $("#languageSelect").val("");
        $("#uploadDate").val("");
        $("#deleteAttachmentBtn").addClass("d-none").removeData("id");
        $("#createAttachmentSubmitBtn").removeClass("d-none");
        $("#createAttachmentModal").removeData("type").removeData("id");
      }

      // ================= OPEN CREATE MODAL (Photo) =================
      $("#openCreateModalPhotoBtn").on("click", function () {
        resetAttachmentModal(); // üßπ full clean reset first
        $("#modalTitle").text("Add New Photo Attachment");
        $("#createAttachmentModal").data("type", "photo").modal("show");
      });

      // ================= OPEN CREATE MODAL (Video) =================
      $("#openCreateModalVideoBtn").on("click", function () {
        resetAttachmentModal();
        $("#modalTitle").text("Add New Video Attachment");
        $("#createAttachmentModal").data("type", "video").modal("show");
      });

      $(document).ready(function () {
        const BASE_API_URL = "https://tngis.tnega.org/lcap_api/dipr-lcap-api/v1";
        const userId = "Admin"; // temporary fallback

        $(document).on("click", "#createAttachmentSubmitBtn", function (e) {
          e.preventDefault();
          console.log("Submit button clicked ‚úÖ");

          const fileInput = $("#fileUpload")[0];
          const file = fileInput?.files[0];
          const language = $("#languageSelect").val();
          const uploadDate = $("#uploadDate").val();
          const uploadType = $("#createAttachmentModal").data("type") || "photo";

          if (!file) {
            alert("Please select a file before submitting.");
            return;
          }

          const mimeType = file.type;
          const fileCategory = mimeType.startsWith("video") ? "video" : "image";

          const payload = {
            action: "function_call",
            function_name: "fn_ins_govt_attachments",
            params: {
              p_file_attachment_name: `/uploads/${file.name}`,
              p_file_name: file.name,
              p_mimetype: mimeType,
              // p_file_category: fileCategory,
              p_p_date: uploadDate || new Date().toISOString().split("T")[0],
              p_language: language,
              p_created_by: userId,
            },

          };

          console.log("Payload ready:", payload);

          const formData = new FormData();
          formData.append("data", encryptData(payload));


          $.ajax({
            url: `${BASE_API_URL}/commonfunction`,
            method: "POST",
            data: formData,
            processData: false,
            contentType: false,
            success: function (res) {
              console.log("‚úÖ API success:", res);
              alert("Attachment uploaded successfully.");

              $('#preloader').hide();
              $('body').removeClass('user_loading');
              $("#createAttachmentModal").modal("hide");
              $("#createAttachmentForm")[0].reset();

              // üß© Identify which type of upload
              const currentType = $("#createAttachmentModal").data("type");

              // üåÄ Delay a little to ensure modal fully hides before reload
              setTimeout(() => {
                if (currentType === "photo") {
                  console.log("üîÅ Refreshing photo DataTable...");
                  // Works because photo table uses DataTable with AJAX
                  if ($.fn.DataTable.isDataTable("#admin-photo-upload-table")) {
                    $("#admin-photo-upload-table").DataTable().ajax.reload(null, false);
                  } else {
                    fetchPhotoData();
                  }
                } else {
                  console.log("üîÅ Refreshing video DataTable...");
                  // Video table is built manually, so call fetchVideoData() again
                  fetchVideoData();
                }
              }, 500);
            },

            error: function (err) {
              console.error("‚ùå API error:", err);
              alert("Error in uploading. Check console for details.");
            },
          });
        });

        // Prevent form default submit
        $(document).on("submit", "#createAttachmentForm", function (e) {
          e.preventDefault();
          return false;
        });
      });



      // ================= FETCH PHOTO DATA (DataTable) =================
      function fetchPhotoData() {
        if ($.fn.DataTable.isDataTable("#admin-photo-upload-table")) {
          $("#admin-photo-upload-table").DataTable().destroy();
        }

        $("#admin-photo-upload-table").DataTable({
          processing: true,
          serverSide: true,
          searching: true,
          paging: true,
          ordering: true,
          order: [[1, "asc"]],
          columnDefs: [{ orderable: false, targets: 0 }],
          ajax: function (data, callback) {
            const payload = {
              action: "function_call",
              function_name: "fn_govt_attachments",
              params: {
                p_language: langSwitch,
                p_mine: "image",
              },
              limit: data.length,
              offset: data.start,
              search: data.search.value || "",
              search_key: "file_name",
            };

            $.ajax({
              url: `${BASE_API_URL}/commonfunction`,
              method: "POST",
              data: { data: encryptData(payload) },
              dataType: "json",
              success: function (response) {
                if (response.success) {
                  const decryptedData = decryptData(response.data);
                  const totalRecords = response.pagination?.total || decryptedData.length;

                  const formattedData = decryptedData.map((item) => ({
                    edit: `<a href="javascript:void(0);"><i class="bi bi-pencil-square" data-id="${item.id}"></i></a>`,
                    file_name: item.file_name || "N/A",
                    language: item.language || "N/A",
                    created_by: item.created_by || "N/A",
                    created_on: item.created_on || "N/A",
                  }));

                  callback({
                    draw: data.draw,
                    recordsTotal: totalRecords,
                    recordsFiltered: totalRecords,
                    data: formattedData,
                  });
                } else {
                  callback({ data: [], recordsTotal: 0, recordsFiltered: 0 });
                }
              },
              error: function () {
                callback({ data: [], recordsTotal: 0, recordsFiltered: 0 });
              },
            });
          },
          columns: [
            { data: "edit", orderable: false },
            { data: "file_name" },
            { data: "language" },
            { data: "created_by" },
            { data: "created_on" },
          ],
        });
      }

      // ================= FETCH VIDEO DATA =================
      function fetchVideoData() {
        const payload = {
          action: "function_call",
          function_name: "fn_govt_attachments",
          params: { p_language: langSwitch, p_mine: "video" },
        };

        $.ajax({
          url: `${BASE_API_URL}/commonfunction`,
          method: "POST",
          data: { data: encryptData(payload) },
          dataType: "json",
          success: function (response) {
            const decryptedData = decryptData(response.data) || [];

            // ‚úÖ Destroy existing DataTable first (before touching DOM)
            if ($.fn.DataTable.isDataTable("#video-upload-table")) {
              $("#video-upload-table").DataTable().clear().destroy();
            }

            // ‚úÖ Now safely rebuild table body
            const tableBody = $("#video-upload-table tbody");
            tableBody.empty();

            if (decryptedData.length === 0) {
              tableBody.append('<tr><td colspan="5" class="text-center">No Data Found</td></tr>');
            } else {
              decryptedData.forEach((item) => {
                tableBody.append(`
            <tr>
              <td><a data-id="${item.id}" href="javascript:void(0);"><i class="bi bi-pencil-square"></i></a></td>
              <td>${item.file_name || "N/A"}</td>
              <td>${item.language || "N/A"}</td>
              <td>${item.created_by || "N/A"}</td>
              <td>${item.created_on || "N/A"}</td>
            </tr>
          `);
              });
            }

            // ‚úÖ Reinitialize DataTable fresh
            $("#video-upload-table").DataTable({
              destroy: true,
              paging: true,
              searching: true,
              ordering: true,
              order: [[1, "asc"]],
              responsive: true,
              autoWidth: false,
            });
          },
          error: function () {
            console.error("Error loading video data");
            const tableBody = $("#video-upload-table tbody");
            tableBody.html('<tr><td colspan="5" class="text-center">Error loading data</td></tr>');
          },
        });
      }

      // ================= INIT =================
      fetchPhotoData();

      // ================= OPEN EDIT / DELETE MODAL =================
      $(document).on("click", ".bi-pencil-square", function () {
        const $row = $(this).closest("tr");
        const fileName = $row.find("td:eq(1)").text().trim();
        const language = $row.find("td:eq(2)").text().trim();
        const createdOn = $row.find("td:eq(4)").text().trim();

        // ‚úÖ Get the record ID from the clicked edit icon
        // const recordId = $(this).data("id");
        const recordId = $(this).data("id") || $(this).closest("a").data("id");

        // Determine whether it's photo or video
        const uploadType = $(this).closest("table").attr("id").includes("video") ? "video" : "photo";
        $("#createAttachmentModal").data("type", uploadType);

        // üß© Fill modal fields
        $("#modalTitle").text(`View / Delete ${uploadType === "photo" ? "Photo" : "Video"} Attachment`);
        $("#languageSelect").val(language);
        $("#uploadDate").val(createdOn);

        // ‚úÖ Show filename inside text field
        $("#fileUpload").hide();
        $("#fileNameField").val(fileName).show();

        // ‚úÖ Hide submit, show delete
        $("#createAttachmentSubmitBtn").addClass("d-none");
        $("#deleteAttachmentBtn").removeClass("d-none");

        // ‚úÖ Store the ID on the delete button for later use
        $("#deleteAttachmentBtn").data("id", recordId);

        // üü¢ Open modal
        $("#createAttachmentModal").modal("show");

        console.log("üÜî Record ID stored for deletion:", recordId);
      });

      // ================= DELETE ATTACHMENT =================
      $(document).on("click", "#deleteAttachmentBtn", function () {
        const recordId = $(this).data("id");

        if (!recordId) {
          showErrorToast("No record ID found for deletion.");
          return;
        }

        if (!confirm("Are you sure you want to delete this attachment?")) {
          return;
        }

        const payload = {
          action: "function_call",
          function_name: "fn_del_govt_attachments",
          params: {
            p_id: recordId
          }
        };

        const formData = new FormData();
        formData.append("data", encryptData(payload));

        $.ajax({
          url: `${BASE_API_URL}/commonfunction`,
          method: "POST",
          data: formData,
          processData: false,
          contentType: false,
          success: function (response) {
            console.log("‚úÖ Delete API success:", response);
            showSuccessToast("Attachment deleted successfully.");

            $("#createAttachmentModal").modal("hide");

            // Refresh appropriate table
            const currentType = $("#createAttachmentModal").data("type");
            if (currentType === "photo") {
              fetchPhotoData();
            } else {
              fetchVideoData();
            }
          },
          error: function (err) {
            console.error("‚ùå Delete API error:", err);
            alert("Failed to delete attachment. Check console for details.");
          }
        });
      });

      let videoLoaded = false;

      $('a[data-bs-toggle="tab"]').on("shown.bs.tab", function (e) {
        const target = $(e.target).attr("href");

        if (target === "#photoPane") {
          fetchPhotoData();
        } else if (target === "#videoPane") {
          fetchVideoData(); // or conditionally if you only want once
          // if (!videoLoaded) {
          //   fetchVideoData();
          //   videoLoaded = true;
          // }
        }
      });

      // =======================================
      // ‚úÖ Language switch
      // =======================================
      $('#P0_LANGUAGE').on('change', function () {
        langSwitch = this.value === "en" ? "en" : "ta";
        location.reload();
      });
    });
  </script> -->
  <script>
    $(document).ready(function () {
      let langSwitch = "en";

      // ==========================================================
      // üîπ Decrypt User Info
      // ==========================================================
      const secretKey = decryptKey();
      const encryptedData = localStorage.getItem("userAdminName");
      let userId = null;

      if (encryptedData) {
        try {
          const decryptedData = JSON.parse(
            CryptoJS.AES.decrypt(encryptedData, secretKey).toString(CryptoJS.enc.Utf8)
          );
          userId = decryptedData?.user_id || "Admin";
        } catch (err) {
          console.error("Error decrypting user data:", err);
        }
      }

      // ==========================================================
      // üîπ COMMON UTILITY FUNCTION
      // ==========================================================
      function initDataTable(tableId) {
        if ($.fn.DataTable.isDataTable(tableId)) {
          $(tableId).DataTable().destroy();
        }
        $(tableId).DataTable({
          paging: true,
          searching: true,
          ordering: true,
          order: [[1, "asc"]],
        });
      }

      // ==========================================================
      // üîπ PHOTO SECTION
      // ==========================================================
      function resetPhotoModal() {
        const form = $("#photoAttachmentForm")[0];
        if (form) form.reset();
        $("#photoFileName").hide().val("");
        $("#photoFile").show();
        $("#photoSubmitBtn").removeClass("d-none");
        $("#photoDeleteBtn").addClass("d-none").removeData("id");
      }

      $("#openPhotoModalBtn").on("click", function () {
        resetPhotoModal();
        $("#photoAttachmentModal .modal-title").text("Add New Photo Attachment");
        $("#photoAttachmentModal").modal("show");
      });

      function fetchPhotoData() {
        // Destroy any existing instance before creating a new one
        if ($.fn.DataTable.isDataTable("#photoTable")) {
          $("#photoTable").DataTable().destroy();
        }

        $("#photoTable").DataTable({
          processing: true,
          serverSide: true,
          searching: true,
          ordering: true,
          order: [[1, "asc"]],
          ajax: function (data, callback, settings) {
            // Map DataTables parameters
            const payload = {
              action: "function_call",
              function_name: "fn_govt_attachments",
              params: { 
                p_language: langSwitch, 
                p_mine: "image" 
              },
              limit: data.length,      // number of records per page
              offset: data.start,      // starting record index
            };

            // If search box is used
            if (data.search && data.search.value) {
              payload.search = data.search.value;
            }

            $.ajax({
              url: `${BASE_API_URL}/commonfunction`,
              method: "POST",
              data: { data: encryptData(payload) },
              dataType: "json",
              success: function (res) {
                const decryptedData = decryptData(res.data) || [];
                const total = res.pagination?.total || decryptedData.length;

                // Build DataTables response object
                callback({
                  draw: data.draw,
                  recordsTotal: total,
                  recordsFiltered: total,
                  data: decryptedData.map((item) => [
                    `<a href="javascript:void(0);" class="photo-edit" data-id="${item.id}">
                      <i class="bi bi-pencil-square"></i>
                    </a>`,
                    item.file_name || "-",
                    item.language || "-",
                    item.created_by || "-",
                    item.created_on || "-"
                  ]),
                });
              },
              error: function (xhr) {
                console.error("Error fetching photo data:", xhr);
                callback({
                  draw: data.draw,
                  recordsTotal: 0,
                  recordsFiltered: 0,
                  data: [],
                });
              },
            });
          },
          columns: [
            { title: "Edit", orderable: false },
            { title: "File Name" },
            { title: "Language" },
            { title: "Created By" },
            { title: "Created On" },
          ],
        });
      }

      $(document).off("click", "#photoSubmitBtn").on("click", "#photoSubmitBtn", function () {
        const file = $("#photoFile")[0].files[0];
        const id = $(this).data("id"); // undefined for new uploads
        const isEdit = !!id;

        const payload = {
          action: "function_call",
          function_name: isEdit ? "fn_upd_govt_attachments" : "fn_ins_govt_attachments",
          params: {
            p_id: id || null,
            p_file_attachment_name: file ? `/uploads/${file.name}` : $("#photoFileName").val(),
            p_file_name: file ? file.name : $("#photoFileName").val(),
            p_mimetype: file ? file.type : null,
            p_p_date: $("#photoDate").val(),
            p_language: $("#photoLanguage").val(),
            p_created_by: userId,
          },
        };

        const formData = new FormData();
        formData.append("data", encryptData(payload));
        if (file) formData.append("file", file);

        $.ajax({
          url: `${BASE_API_URL}/commonfunction`,
          method: "POST",
          data: formData,
          processData: false,
          contentType: false,
          success: function () {
            alert(isEdit ? "Photo updated successfully!" : "Photo uploaded successfully!");
            $("#photoAttachmentModal").modal("hide");
            fetchPhotoData();
          },
          error: function (xhr) {
            console.error("Error uploading photo:", xhr);
          },
        });
      });

      $(document).on("click", ".photo-edit", function () {
        const row = $(this).closest("tr");
        const fileName = row.find("td:eq(1)").text();
        const language = row.find("td:eq(2)").text();
        const date = row.find("td:eq(4)").text();
        const id = $(this).data("id");

        // Fill modal fields
        $("#photoLanguage").val(language);
        $("#photoDate").val(date);
        $("#photoFileName").val(fileName).show();
        $("#photoFile").val("").show(); // allow file replacement

        // Toggle buttons
        $("#photoSubmitBtn").removeClass("d-none").text("Update").data("id", id); // update action
        $("#photoDeleteBtn").removeClass("d-none").data("id", id);

        // Show modal
        $("#photoAttachmentModal").modal("show");
      });

      $("#photoDeleteBtn").on("click", function () {
        const id = $(this).data("id");
        if (!id || !confirm("Delete this photo?")) return;

        const payload = {
          action: "function_call",
          function_name: "fn_del_govt_attachments",
          params: { p_id: id },
        };

        const formData = new FormData();
        formData.append("data", encryptData(payload));

        $.ajax({
          url: `${BASE_API_URL}/commonfunction`,
          method: "POST",
          data: formData,
          processData: false,
          contentType: false,
          success: function () {
            alert("Photo deleted successfully.");
            $("#photoAttachmentModal").modal("hide");
            fetchPhotoData();
          },
          error: function (xhr) {
            console.error("Error deleting photo:", xhr);
          },
        });
      });

      fetchPhotoData();

      // ==========================================================
      // üîπ VIDEO SECTION
      // ==========================================================
      function resetVideoModal() {
        const form = $("#videoAttachmentForm")[0];
        if (form) form.reset();
        $("#videoFileName").hide().val("");
        $("#videoFile").show();
        $("#videoSubmitBtn").removeClass("d-none");
        $("#videoDeleteBtn").addClass("d-none").removeData("id");
      }

      $("#openVideoModalBtn").on("click", function () {
        resetVideoModal();
        $("#videoAttachmentModal .modal-title").text("Add New Video Attachment");
        $("#videoAttachmentModal").modal("show");
      });

      function fetchVideoData() {
        // Destroy any existing DataTable instance before reinitializing
        if ($.fn.DataTable.isDataTable("#videoTable")) {
          $("#videoTable").DataTable().destroy();
        }

        $("#videoTable").DataTable({
          processing: true,
          serverSide: true,
          searching: true,
          ordering: true,
          order: [[1, "asc"]],
          ajax: function (data, callback, settings) {
            const payload = {
              action: "function_call",
              function_name: "fn_get_govt_attachment_video",
              params: { p_language: langSwitch },
              limit: data.length,   // page size
              offset: data.start,   // starting row index
            };

            // Add search text if user typed something
            if (data.search && data.search.value) {
              payload.search = data.search.value;
            }

            $.ajax({
              url: `${BASE_API_URL}/commonfunction`,
              method: "POST",
              data: { data: encryptData(payload) },
              dataType: "json",
              success: function (res) {
                const decryptedData = decryptData(res.data) || [];
                const total = res.pagination?.total || decryptedData.length;

                // Send formatted data back to DataTables
                callback({
                  draw: data.draw,
                  recordsTotal: total,
                  recordsFiltered: total,
                  data: decryptedData.map((item) => [
                    `<a href="javascript:void(0);" class="video-edit" data-id="${item.id}">
                      <i class="bi bi-pencil-square"></i>
                    </a>`,
                    item.v_name || "-",
                    item.v_desc || "-",
                    item.v_url || "-",
                    item.language || "-",
                    item.created_by || "-",
                    item.created_on || "-"
                  ]),
                });
              },
              error: function (xhr) {
                console.error("Error fetching video data:", xhr);
                callback({
                  draw: data.draw,
                  recordsTotal: 0,
                  recordsFiltered: 0,
                  data: [],
                });
              },
            });
          },
          columns: [
            { title: "Edit", orderable: false },
            { title: "Video Name" },
            { title: "Description" },
            { title: "Video URL" },
            { title: "Language" },
            { title: "Created By" },
            { title: "Created On" },
          ],
        });
      }

      $(document).off("click", "#videoSubmitBtn").on("click", "#videoSubmitBtn", function () {
        const youtubeRegex = /^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)[\w-]{11}(&.*)?$/;

        const videoUrl = $("#videoUrl").val();

        // Validate YouTube URL
        if (!youtubeRegex.test(videoUrl)) {
            $("#urlError").removeClass("d-none");
            return;
        } else {
            $("#urlError").addClass("d-none");
        }
        const payload = {
          action: "function_call",
          function_name: "fn_ins_govt_attachment_video",
          params: {
            p_name: $("#videoName").val(),
            p_desc: $("#videoDescription").val(),
            p_url: $("#videoUrl").val(),
            p_date: $("#videoDate").val(),
            p_language: $("#videoLanguage").val(),
            p_created_by: userId,
          },
        };

        const formData = new FormData();
        formData.append("data", encryptData(payload));

        $.ajax({
          url: `${BASE_API_URL}/commonfunction`,
          method: "POST",
          data: formData,
          processData: false,
          contentType: false,
          success: function () {
            alert("Video uploaded successfully!");
            $("#videoAttachmentModal").modal("hide");
            fetchVideoData();
          },
          error: function (xhr) {
            console.error("Error uploading video:", xhr);
          },
        });
      });

      $(document).on("click", ".video-edit", function () {
        const row = $(this).closest("tr");
        $("#videoLanguage").val(row.find("td:eq(2)").text());
        $("#videoDate").val(row.find("td:eq(4)").text());
        $("#videoFileName").val(row.find("td:eq(1)").text()).show();
        $("#videoFile").hide();
        $("#videoSubmitBtn").addClass("d-none");
        $("#videoDeleteBtn").removeClass("d-none").data("id", $(this).data("id"));
        $("#videoAttachmentModal").modal("show");
      });

      $("#videoDeleteBtn").on("click", function () {
        const id = $(this).data("id");
        if (!id || !confirm("Delete this video?")) return;

        const payload = {
          action: "function_call",
          function_name: "fn_del_govt_attachments",
          params: { p_id: id },
        };

        const formData = new FormData();
        formData.append("data", encryptData(payload));

        $.ajax({
          url: `${BASE_API_URL}/commonfunction`,
          method: "POST",
          data: formData,
          processData: false,
          contentType: false,
          success: function () {
            alert("Video deleted successfully.");
            $("#videoAttachmentModal").modal("hide");
            fetchVideoData();
          },
          error: function (xhr) {
            console.error("Error deleting video:", xhr);
          },
        });
      });

      // fetchVideoData();
      let videoLoaded = false;

      $('a[data-bs-toggle="tab"]').on("shown.bs.tab", function (e) {
        const targetTab = $(e.target).attr("href"); // example: #photoTab or #videoTab

        if (targetTab === "#videoPane") {
          fetchVideoData();
        } else if (targetTab === "#photoPane") {
          fetchPhotoData();
        }
      });

    });
  </script>

</body>

</html>